"use strict";(self.webpackChunkpayment_doc=self.webpackChunkpayment_doc||[]).push([[444],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>f});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),l=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):u(u({},t),e)),r},c=function(e){var t=l(e.components);return a.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=l(r),m=n,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||o;return r?a.createElement(f,u(u({ref:t},c),{},{components:r})):a.createElement(f,u({ref:t},c))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,u=new Array(o);u[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:n,u[1]=i;for(var l=2;l<o;l++)u[l]=r[l];return a.createElement.apply(null,u)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},919:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>u,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=r(7462),n=(r(7294),r(3905));const o={sidebar_position:2},u=void 0,i={unversionedId:"Visa or Mastercard/Auto Return",id:"Visa or Mastercard/Auto Return",title:"Auto Return",description:"The Auto Return feature for Visa/Mastercard redirects the buyer back to your website after payment has completed, failed or due to an error. Here's how to enable Auto Return:",source:"@site/docs/Visa or Mastercard/Auto Return.md",sourceDirName:"Visa or Mastercard",slug:"/Visa or Mastercard/Auto Return",permalink:"/Visa or Mastercard/Auto Return",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:" Visa / Mastercard",permalink:"/category/-visa--mastercard"},next:{title:"Request Payment Session",permalink:"/Visa or Mastercard/Request Payment Session"}},s={},l=[{value:"Relworx will make a HTTP POST request to your auto-return configured URL. Ensure to verify that Relworx made this request by generating and comparing your signature to relworx_signature value.",id:"relworx-will-make-a-http-post-request-to-your-auto-return-configured-url-ensure-to-verify-that-relworx-made-this-request-by-generating-and-comparing-your-signature-to-relworx_signature-value",level:4},{value:"Generate verification signature to verify Auto Return:",id:"generate-verification-signature-to-verify-auto-return",level:5}],c={toc:l},p="wrapper";function d(e){let{components:t,...r}=e;return(0,n.kt)(p,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"The Auto Return feature for Visa/Mastercard redirects the buyer back to your website after payment has completed, failed or due to an error. Here's how to enable Auto Return:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Login to your dashboard and click on accounts."),(0,n.kt)("li",{parentName:"ol"},"Click on view button for the business account you use for visa/mastercard payments."),(0,n.kt)("li",{parentName:"ol"},"You can view your current Auto Return configuration under settings. Click on edit business account button to change settings.")),(0,n.kt)("p",null,"When you enable Auto Return and configure URL's for Auto Return, the target page must meet the following requirements."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"The text must help the buyer understand that the payment was made and the transaction was completed."),(0,n.kt)("li",{parentName:"ul"},"The text must explain that the buyer will receive an email containing details about the payment transaction."),(0,n.kt)("li",{parentName:"ul"},"The page must provide a good user experience for your customers.")),(0,n.kt)("h4",{id:"relworx-will-make-a-http-post-request-to-your-auto-return-configured-url-ensure-to-verify-that-relworx-made-this-request-by-generating-and-comparing-your-signature-to-relworx_signature-value"},"Relworx will make a HTTP POST request to your auto-return configured URL. Ensure to verify that Relworx made this request by generating and comparing your signature to relworx_signature value."),(0,n.kt)("h5",{id:"generate-verification-signature-to-verify-auto-return"},"Generate verification signature to verify Auto Return:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},'/**\n * @param string $webhook_key the webhooks authentication key\n * @param string $url the webhook url\n * @param string $timestamp the signature timestamp\n * @param array $params the requests POST parameters\n */\n\n// This data is posted to your configured auto-return\n// URL plus a relworx_signature value you can compare with to verify request\n\n//Only include these from received POST data.\n$params = array(\n  "status" => "success",\n  "customer_reference" => "shdfjsue789sh8jshuehu",\n  "internal_reference" => "jshfufehkshffkseuhfskahakhuefak",\n);\n\nfunction generateSignature($webhook_key, $timestamp, $url, $params) {\n    $signed_data = $url;\n    $signed_data .= $timestamp;\n    ksort($params);\n    foreach ($params as $key => $value) {\n        $signed_data .= strval($key);\n        $signed_data .= strval($value);\n    }\n\n    return hash_hmac(\'sha256\', $signed_data, $webhook_key, false);\n}\n')))}d.isMDXComponent=!0}}]);